https://github.com/dosfstools/dosfstools/commit/07908124838afcc99c577d1d3e84cef2dbd39cb7

Index: dosfstools-3.0.27/src/fat.c
===================================================================
--- dosfstools-3.0.27.orig/src/fat.c	2020-05-29 10:17:36.878272748 +0200
+++ dosfstools-3.0.27/src/fat.c	2020-05-29 10:17:36.874272610 +0200
@@ -197,10 +197,12 @@
 	    data[1] = new >> 4;
 	} else {
 	    FAT_ENTRY subseqEntry;
-	    get_fat(&subseqEntry, fs->fat, cluster + 1, fs);
+	    if (cluster != fs->clusters - 1)
+	        get_fat(&subseqEntry, fs->fat, cluster + 1, fs);
+	    else
+	        subseqEntry.value = 0;
 	    data[0] = new & 0xff;
-	    data[1] = (new >> 8) | (cluster == fs->clusters - 1 ? 0 :
-				    (0xff & subseqEntry.value) << 4);
+	    data[1] = (new >> 8) | ((0xff & subseqEntry.value) << 4);
 	}
 	size = 2;
 	break;
